{"ast":null,"code":"import{__assign}from\"tslib\";import{parse}from'graphql';var docCache=new Map();var fragmentSourceMap=new Map();var printFragmentWarnings=true;var experimentalFragmentVariables=false;function normalize(string){return string.replace(/[\\s,]+/g,' ').trim();}function cacheKeyFromLoc(loc){return normalize(loc.source.body.substring(loc.start,loc.end));}function processFragments(ast){var seenKeys=new Set();var definitions=[];ast.definitions.forEach(function(fragmentDefinition){if(fragmentDefinition.kind==='FragmentDefinition'){var fragmentName=fragmentDefinition.name.value;var sourceKey=cacheKeyFromLoc(fragmentDefinition.loc);var sourceKeySet=fragmentSourceMap.get(fragmentName);if(sourceKeySet&&!sourceKeySet.has(sourceKey)){if(printFragmentWarnings){console.warn(\"Warning: fragment with name \"+fragmentName+\" already exists.\\n\"+\"graphql-tag enforces all fragment names across your application to be unique; read more about\\n\"+\"this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names\");}}else if(!sourceKeySet){fragmentSourceMap.set(fragmentName,sourceKeySet=new Set());}sourceKeySet.add(sourceKey);if(!seenKeys.has(sourceKey)){seenKeys.add(sourceKey);definitions.push(fragmentDefinition);}}else{definitions.push(fragmentDefinition);}});return __assign(__assign({},ast),{definitions:definitions});}function stripLoc(doc){var workSet=new Set(doc.definitions);workSet.forEach(function(node){if(node.loc)delete node.loc;Object.keys(node).forEach(function(key){var value=node[key];if(value&&typeof value==='object'){workSet.add(value);}});});var loc=doc.loc;if(loc){delete loc.startToken;delete loc.endToken;}return doc;}function parseDocument(source){var cacheKey=normalize(source);if(!docCache.has(cacheKey)){var parsed=parse(source,{experimentalFragmentVariables:experimentalFragmentVariables,allowLegacyFragmentVariables:experimentalFragmentVariables});if(!parsed||parsed.kind!=='Document'){throw new Error('Not a valid GraphQL document.');}docCache.set(cacheKey,stripLoc(processFragments(parsed)));}return docCache.get(cacheKey);}export function gql(literals){var args=[];for(var _i=1;_i<arguments.length;_i++){args[_i-1]=arguments[_i];}if(typeof literals==='string'){literals=[literals];}var result=literals[0];args.forEach(function(arg,i){if(arg&&arg.kind==='Document'){result+=arg.loc.source.body;}else{result+=arg;}result+=literals[i+1];});return parseDocument(result);}export function resetCaches(){docCache.clear();fragmentSourceMap.clear();}export function disableFragmentWarnings(){printFragmentWarnings=false;}export function enableExperimentalFragmentVariables(){experimentalFragmentVariables=true;}export function disableExperimentalFragmentVariables(){experimentalFragmentVariables=false;}var extras={gql:gql,resetCaches:resetCaches,disableFragmentWarnings:disableFragmentWarnings,enableExperimentalFragmentVariables:enableExperimentalFragmentVariables,disableExperimentalFragmentVariables:disableExperimentalFragmentVariables};(function(gql_1){gql_1.gql=extras.gql,gql_1.resetCaches=extras.resetCaches,gql_1.disableFragmentWarnings=extras.disableFragmentWarnings,gql_1.enableExperimentalFragmentVariables=extras.enableExperimentalFragmentVariables,gql_1.disableExperimentalFragmentVariables=extras.disableExperimentalFragmentVariables;})(gql||(gql={}));gql[\"default\"]=gql;export default gql;","map":{"version":3,"mappings":"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","names":["parse","docCache","Map","fragmentSourceMap","printFragmentWarnings","experimentalFragmentVariables","normalize","string","replace","trim","cacheKeyFromLoc","loc","source","body","substring","start","end","processFragments","ast","seenKeys","Set","definitions","forEach","fragmentDefinition","kind","fragmentName","name","value","sourceKey","sourceKeySet","get","has","console","warn","set","add","push","stripLoc","doc","workSet","node","Object","keys","key","startToken","endToken","parseDocument","cacheKey","parsed","allowLegacyFragmentVariables","Error","gql","literals","args","result","arg","i","resetCaches","clear","disableFragmentWarnings","enableExperimentalFragmentVariables","disableExperimentalFragmentVariables","extras","gql_1"],"sourceRoot":"","sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}