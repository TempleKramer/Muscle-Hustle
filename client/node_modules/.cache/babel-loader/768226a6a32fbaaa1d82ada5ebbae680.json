{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jarma\\\\school\\\\challenges\\\\Project3_Final\\\\fitness-app\\\\client\\\\src\\\\components\\\\form.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Auth from '../utils/auth';\n\nconst Form = props => {\n  const [exerciseForm, setExerciseForm] = useState({\n    exercise: {\n      inputType: \"input\",\n      value: \"\",\n      title: \"Name of Exercise\",\n      elementConfig: {\n        type: \"text\",\n        placeholder: \"Exercise Name\"\n      }\n    },\n    reps: {\n      inputType: \"input\",\n      value: \"\",\n      title: \"Number of Reps\",\n      elementConfig: {\n        type: \"text\",\n        placeholder: \"Number of Reps\"\n      }\n    }\n  });\n  const loggedIn = Auth.loggedIn();\n  let inputArray = [];\n\n  for (let key in exerciseForm) {\n    inputArray.push({\n      id: key,\n      config: exerciseForm[key]\n    });\n  }\n\n  const inputChangedHandler = (e, input) => {\n    const updatedInput = { ...exerciseForm[input],\n      value: e.target.value\n    };\n    const updatedForm = { ...exerciseForm,\n      [input]: updatedInput\n    };\n    setExerciseForm(updatedForm);\n  };\n\n  const clearFields = () => {\n    const clearExercise = { ...exerciseForm[\"exercise\"],\n      value: \"\"\n    };\n    const clearReps = { ...exerciseForm[\"reps\"],\n      value: \"\"\n    };\n    const clearedForm = { ...exerciseForm,\n      exercise: clearExercise,\n      reps: clearReps\n    };\n    setExerciseForm(clearedForm);\n  };\n\n  const submitExerciseHandler = e => {\n    e.preventDefault();\n    const exercise = exerciseForm.exercise.value;\n    const reps = exerciseForm.reps.value;\n    const newExercise = {\n      exercise: exercise,\n      reps: reps\n    };\n    const localStorageExercises = JSON.parse(localStorage.getItem(\"exercises\"));\n    localStorageExercises.push(newExercise);\n    localStorage.setItem(\"exercises\", JSON.stringify(localStorageExercises));\n    onCheckAuth();\n    props.onSaveExercise(newExercise);\n    clearFields();\n  };\n\n  const submitWorkoutHandler = e => {\n    e.preventDefault();\n    const id = props.userId;\n    const exercise = exerciseForm.exercise.value;\n    const reps = exerciseForm.reps.value;\n    const workout = JSON.parse(localStorage.getItem(\"exercises\"));\n    const time = new Date();\n    const date = time.toLocaleDateString(\"en\", {\n      month: \"numeric\",\n      day: \"numeric\",\n      year: \"2-digit\"\n    });\n    const addDate = {\n      date: date\n    };\n    workout.unshift(addDate);\n\n    if (exercise) {\n      const newExercise = {\n        exercise: exercise,\n        reps: reps\n      };\n      workout.push(newExercise);\n      props.onSaveWorkout(workout, id);\n      clearFields();\n    } else {\n      props.onSaveWorkout(workout, id);\n      clearFields();\n    }\n  };\n\n  let errorMessage = null;\n\n  if (props.errorMessage) {\n    errorMessage = /*#__PURE__*/React.createElement(\"p\", {\n      className: classes.Error,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 20\n      }\n    }, props.errorMessage);\n  }\n\n  return loggedIn && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }\n  }, inputArray.map(input => /*#__PURE__*/React.createElement(Input, {\n    key: input.id,\n    inputType: input.config.inputType,\n    value: input.config.value,\n    title: input.config.title,\n    elementConfig: input.config.elementConfig,\n    changed: e => inputChangedHandler(e, input.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: SpreadButtons,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    clicked: submitExerciseHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, \"Save Exercise\"), /*#__PURE__*/React.createElement(Button, {\n    clicked: submitWorkoutHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"Save Workout\"))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    errorMessage: state.workouts.error,\n    userId: state.auth.userId\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onSaveExercise: newExercise => dispatch(actions.saveExercise(newExercise)),\n    onSaveWorkout: (workout, id) => dispatch(actions.saveWorkout(workout, id)),\n    onCheckAuth: () => dispatch(actions.checkAuth())\n  };\n};\n\nexport default Form;","map":{"version":3,"names":["React","useState","useEffect","Auth","Form","props","exerciseForm","setExerciseForm","exercise","inputType","value","title","elementConfig","type","placeholder","reps","loggedIn","inputArray","key","push","id","config","inputChangedHandler","e","input","updatedInput","target","updatedForm","clearFields","clearExercise","clearReps","clearedForm","submitExerciseHandler","preventDefault","newExercise","localStorageExercises","JSON","parse","localStorage","getItem","setItem","stringify","onCheckAuth","onSaveExercise","submitWorkoutHandler","userId","workout","time","Date","date","toLocaleDateString","month","day","year","addDate","unshift","onSaveWorkout","errorMessage","classes","Error","map","SpreadButtons","mapStateToProps","state","workouts","error","auth","mapDispatchToProps","dispatch","actions","saveExercise","saveWorkout","checkAuth"],"sources":["C:/Users/jarma/school/challenges/Project3_Final/fitness-app/client/src/components/form.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Auth from '../utils/auth'\r\nconst Form = (props) => {\r\n  const [exerciseForm, setExerciseForm] = useState({\r\n    exercise: {\r\n      inputType: \"input\",\r\n      value: \"\",\r\n      title: \"Name of Exercise\",\r\n      elementConfig: {\r\n        type: \"text\",\r\n        placeholder: \"Exercise Name\",\r\n      },\r\n    },\r\n    reps: {\r\n      inputType: \"input\",\r\n      value: \"\",\r\n      title: \"Number of Reps\",\r\n      elementConfig: {\r\n        type: \"text\",\r\n        placeholder: \"Number of Reps\",\r\n      },\r\n    },\r\n  });\r\n  const loggedIn = Auth.loggedIn()\r\n  let inputArray = [];\r\n  for (let key in exerciseForm) {\r\n    inputArray.push({\r\n      id: key,\r\n      config: exerciseForm[key],\r\n    });\r\n  }\r\n  const inputChangedHandler = (e, input) => {\r\n    const updatedInput = {\r\n      ...exerciseForm[input],\r\n      value: e.target.value,\r\n    };\r\n    const updatedForm = {\r\n      ...exerciseForm,\r\n      [input]: updatedInput,\r\n    };\r\n    setExerciseForm(updatedForm);\r\n  };\r\n  const clearFields = () => {\r\n    const clearExercise = {\r\n      ...exerciseForm[\"exercise\"],\r\n      value: \"\",\r\n    };\r\n    const clearReps = {\r\n      ...exerciseForm[\"reps\"],\r\n      value: \"\",\r\n    };\r\n    const clearedForm = {\r\n      ...exerciseForm,\r\n      exercise: clearExercise,\r\n      reps: clearReps,\r\n    };\r\n    setExerciseForm(clearedForm);\r\n  };\r\n  const submitExerciseHandler = (e) => {\r\n    e.preventDefault();\r\n    const exercise = exerciseForm.exercise.value;\r\n    const reps = exerciseForm.reps.value;\r\n    const newExercise = {\r\n      exercise: exercise,\r\n      reps: reps,\r\n    };\r\n    const localStorageExercises = JSON.parse(localStorage.getItem(\"exercises\"));\r\n    localStorageExercises.push(newExercise);\r\n    localStorage.setItem(\"exercises\", JSON.stringify(localStorageExercises));\r\n    onCheckAuth();\r\n    props.onSaveExercise(newExercise);\r\n    clearFields();\r\n  };\r\n  const submitWorkoutHandler = (e) => {\r\n    e.preventDefault();\r\n    const id = props.userId;\r\n    const exercise = exerciseForm.exercise.value;\r\n    const reps = exerciseForm.reps.value;\r\n    const workout = JSON.parse(localStorage.getItem(\"exercises\"));\r\n    const time = new Date();\r\n    const date = time.toLocaleDateString(\"en\", {\r\n      month: \"numeric\",\r\n      day: \"numeric\",\r\n      year: \"2-digit\",\r\n    });\r\n    const addDate = {\r\n      date: date,\r\n    };\r\n    workout.unshift(addDate);\r\n    if (exercise) {\r\n      const newExercise = {\r\n        exercise: exercise,\r\n        reps: reps,\r\n      };\r\n      workout.push(newExercise);\r\n      props.onSaveWorkout(workout, id);\r\n      clearFields();\r\n    } else {\r\n      props.onSaveWorkout(workout, id);\r\n      clearFields();\r\n    }\r\n  };\r\n  let errorMessage = null;\r\n  if (props.errorMessage) {\r\n    errorMessage = <p className={classes.Error}>{props.errorMessage}</p>;\r\n  }\r\n  return (loggedIn&&\r\n    <div>\r\n      <form className={\"form\"}>\r\n        {inputArray.map((input) => (\r\n          <Input\r\n            key={input.id}\r\n            inputType={input.config.inputType}\r\n            value={input.config.value}\r\n            title={input.config.title}\r\n            elementConfig={input.config.elementConfig}\r\n            changed={(e) => inputChangedHandler(e, input.id)}\r\n          />\r\n        ))}\r\n        <div className={SpreadButtons}>\r\n          <Button clicked={submitExerciseHandler}>Save Exercise</Button>\r\n          <Button clicked={submitWorkoutHandler}>Save Workout</Button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n  \r\n};\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n      errorMessage: state.workouts.error,\r\n      userId: state.auth.userId,\r\n    };\r\n  };\r\n  const mapDispatchToProps = (dispatch) => {\r\n    return {\r\n      onSaveExercise: (newExercise) =>\r\n        dispatch(actions.saveExercise(newExercise)),\r\n      onSaveWorkout: (workout, id) =>\r\n        dispatch(actions.saveWorkout(workout, id)),\r\n      onCheckAuth: () => dispatch(actions.checkAuth()),\r\n    };\r\n  };\r\n  export default Form;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}